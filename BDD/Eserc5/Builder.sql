CREATE TABLE comune(
   nome VARCHAR(20),
   provincia VARCHAR(20),
   regione varchar(20),
   CONSTRAINT comune_pk PRIMARY KEY(nome)
);

CREATE TABLE utente(
   id INTEGER, 
   eta INTEGER,
   comune VARCHAR(20),
   CONSTRAINT utente_pk PRIMARY KEY(id),
   CONSTRAINT comune_fk foreign key (comune) REFERENCES comune
);

CREATE TABLE segue(
	follower INTEGER, 
    utente INTEGER,
    CONSTRAINT segue_pk PRIMARY KEY(follower,utente),
    CONSTRAINT follower_fk foreign key (follower) REFERENCES utente,
    CONSTRAINT utente_fk foreign key (utente) REFERENCES utente,
    CONSTRAINT no_auto_followers CHECK (follower <> utente)
);


insert into comune values
('Roma','RM','Lazio'),
('Anzio','RM','Lazio'),
('Ardea','RM','Lazio'),
('Ariccia','RM','Lazio'),
('Bracciano','RM','Lazio'),
('Subiaco','RM','Lazio'),
('Viterbo','VT','Lazio'),
('Vignanello','VT','Lazio'),
('Tuscania','VT','Lazio'),
('Teramo','TE','Abruzzo'),
('Giulianova','TE','Abruzzo'),
('Roseto','TE','Abruzzo'),
('Pescara','PE','Abruzzo'),
('Montesilvano','PE','Abruzzo'),
('Penne','PE','Abruzzo'),
('Milano','ML','Lombardia'),
('Rho','ML','Lombardia'),
('Legnano','ML','Lombardia'),
('Livorno','LI','Toscana'),
('Piombino','LI','Toscana'),
('Bibbona','LI','Toscana'),
('Firenze','FI','Toscana'),
('Empoli','FI','Toscana'),
('Fiesole','FI','Toscana');



insert into utente values
(1,35,'Roma'),
(2,20,'Roma'),
(3,60,'Roma'),
(4,44,'Roma'),
(5,32,'Anzio'),
(6,26,'Ardea'),
(7,22,'Ariccia'),
(8,75,'Bracciano'),
(9,21,'Bracciano'),
(10,19,'Subiaco'),
(11,50,'Viterbo'),
(12,48,'Viterbo'),
(13,55,'Vignanello'),
(14,26,'Tuscania'),
(41,18,'Roma'),
(42,22,'Roma'),
(43,25,'Roma'),
(44,27,'Roma'),
(45,30,'Roma'),
(46,29,'Viterbo'),
(47,39,'Viterbo'),
(48,43,'Viterbo'),
(49,36,'Viterbo'),
(50,NULL,'Viterbo'),
(15,45,'Teramo'),
(16,44,'Teramo'),
(17,18,'Giulianova'),
(18,22,'Roseto'),
(19,21,'Pescara'),
(20,61,'Pescara'),
(21,37,'Montesilvano'),
(22,35,'Montesilvano'),
(23,43,'Milano'),
(24,26,'Milano'),
(25,32,'Milano'),
(26,33,'Legnano'),
(37,37,'Milano'),
(38,52,'Milano'),
(39,53,'Milano'),
(40,70,'Milano'),
(27,37,'Livorno'),
(28,20,'Livorno'),
(29,NULL,'Piombino'),
(30,NULL,'Bibbona'),
(31,20,'Firenze'),
(32,34,'Empoli'),
(33,45,'Fiesole'),
(34,47,'Firenze'),
(35,19,'Firenze'),
(36,23,'Firenze');


insert into segue values
(2,1),
(3,1),
(4,1),
(5,1),
(6,1),
(7,1),
(8,1),
(9,1),
(10,1),
(11,1),
(12,1),
(13,1),
(14,1),
(41,1),
(42,1),
(43,1),
(44,1),
(45,1),
(46,1),
(47,1),
(15,1),
(16,1),
(17,1),
(18,1),
(2,3),
(3,2),
(1,2),
(1,11),
(15,18),
(16,18),
(17,18),
(21,18),
(19,18),
(20,18),
(18,20),
(23,25),
(24,25),
(26,25),
(28,27),
(29,27),
(30,27),
(31,27),
(32,27),
(33,27),
(34,27),
(35,27),
(23,36),
(15,36),
(22,40),
(40,22),
(38,39),
(39,38);